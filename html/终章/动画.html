<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../../css/终章/解脱.css" type="text/css">
    <link rel="icon" href="../../img/六芒星.png" type="image/x-icon">
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <title>夜幕星河</title>
</head>
<body>
    <canvas id="canvas">    </canvas>
    <div class="menu" id="mydiv">
        <div class="title">
            <div class="hd">
                <iframe frameborder="0" scrolling="no" src="index2.html" width="100%" height="500px"></iframe>
            </div>
        </div>
        <div class="body">
            <div class="xing1" onmouseover="x.play()" >
                <a href="天鹅座.html">天鹅座的朦胧</a>
            </div>
            <div class="xing2" onmouseover="x.play()" >
                <a href="海豚座.html">海豚座的羞涩</a>
            </div>
            <div class="xing3" onmouseover="x.play()" >
                <a href="天琴座.html">天琴座的高洁</a>
            </div>
            <div class="xing4" onmouseover="x.play()" >
                <a href="织女星.html">织女星的凝望</a>
            </div>
            <div class="xing5" onmouseover="x.play()" >
                <a href="北极星.html">北极星的魅力</a>
            </div>
        </div>
    </div>


    <div class='popus'>
        更换BGM
        <div>
            <div class="bgs" onmouseover="y1.play(),y2.pause(),y3.pause(),y4.pause(),y5.pause(),y6.pause()">
                <img src="../../img/bgm01.png" style="width: 90px;">
                <p>月牙湾</p>
            </div>
            <div class="bgs" onmouseover="y2.play(),y1.pause(),y3.pause(),y4.pause(),y5.pause(),y6.pause()">
                <img src="../../img/bgm02.png" style="width: 90px;">
                <p>雪落下的声音</p>
            </div>
            <div class="bgs" onmouseover="y3.play(),y2.pause(),y1.pause(),y4.pause(),y5.pause(),y6.pause()">
                <img src="../../img/bgm03.png" style="width: 90px;">
                <p>安静</p>
            </div>
            <div class="bgs" onmouseover="y4.play(),y2.pause(),y3.pause(),y1.pause(),y5.pause(),y6.pause()">
                <img src="../../img/bgm04.png" style="width: 90px;">
                <p>像我这样的人</p>
            </div>
            <div class="bgs" onmouseover="y5.play(),y2.pause(),y3.pause(),y4.pause(),y1.pause(),y6.pause()">
                <img src="../../img/bgm05.png" style="width: 90px;">
                <p>白月光</p>
            </div>
            <div class="bgs" onmouseover="y6.play(),y2.pause(),y3.pause(),y4.pause(),y5.pause(),y1.pause()">
                <img src="../../img/bgm06.png" style="width: 90px;">
                <p>爱你</p>
            </div>
        </div>
     </div>
    
    <!--音乐 START-->
    <audio src="../../img/shine.ogg" id="e"></audio>
    <script>var x=document.getElementById('e');</script>

    <audio src="../../CSS/终章/月牙湾 .mp3" id="l1"></audio>
    <script>var y1=document.getElementById('l1');</script>
    <audio autoplay src="../../CSS/终章/雪落下的声音.flac" id="l2"></audio>
    <script>var y2=document.getElementById('l2');</script>
    <audio src="../../CSS/终章/安静.flac" id="l3"></audio>
    <script>var y3=document.getElementById('l3');</script>
    <audio src="../../CSS/终章/像我这样的人 .flac" id="l4"></audio>
    <script>var y4=document.getElementById('l4');</script>
    <audio src="../../CSS/终章/白月光 .flac" id="l5"></audio>
    <script>var y5=document.getElementById('l5');</script>
    <audio src="../../CSS/终章/爱你 .flac" id="l6"></audio>
    <script>var y6=document.getElementById('l6');</script>
    <!--音乐 END-->


    <!--小球-->
    <script>
        $('.title').on('click',function(){
        console.log(98)
        $('.menu').addClass('blur');
        $('.popus').show();
      })
        $('.popus').on('click',function(){
        $('.menu').removeClass('blur');
        $('.popus').hide();
      })
    </script>
    <!--小球-->

    <script>
            var can = document.getElementById("canvas");
            var ctx = can.getContext("2d");//设置绘图环境
            var w = can.width = window.innerWidth;//把窗口的宽度赋值给画布
            var h = can.height = window.innerHeight;//把窗口的高度赋值给画布
            var count = 50;//雨滴的个数
            var drops = [];//定义一个空数组来保存雨滴个数
            //浏览器窗口改变的时候重新获取宽度
            window.onresize = function(){
                w = can.width = window.innerWidth;
                h = can.height = window.innerHeight;
            }
            function Drop(){}//定义雨滴对象
            //添加原型对象方法
            Drop.prototype = {
                init : function(){//初始化
                    this.x = random(-400,w);
                    this.y = 0;
                    this.r = 1;//初始半径
                    this.vy = random(3,4);//竖直方向的加速度
                    this.vx = random(3,4);//竖直方向的加速度
                    this.a = 1;//初始透明度
                    this.va = 0.96;//透明度的变化系数
                    this.l = random(h*0.6,h*1.1);//雨滴下落的高度
                },
                draw : function(){
                    if (this.y > this.l)
                    {
                        ctx.beginPath();
                        ctx.arc(this.x,this.y,this.r,0,2*Math.PI,false);
                        ctx.strokeStyle = "white";
                        ctx.stroke();
                    }else{
                        ctx.fillStyle = color(this.a);
                        ctx.fillRect(this.x,this.y,2,2);
                    }
                    this.update();
                },
                //更新坐标
                update : function(){
                    if (this.y < this.l&&this.x<w)
                    {
                        this.y += this.vy;
                        this.x +=this.vx;
                    }else{
                        if (this.a > 0.03)
                        {
                            this.a *= this.va;
                        }else{
                            this.init();
                        }
                    }
                }
            }
            //不断的更新雨滴位置
            function move(){
                ctx.fillStyle = "rgba(0,0,0,.1)";
                ctx.fillRect(0,0,w,h);  //这个在先绘制
                for (var i=0;i<drops.length;i++ )
                {
                    drops[i].draw();
                }
                //调用经动画
                requestAnimationFrame(move);
            }
            //创建一个雨滴实例对象
            //var drop = new Drop();
            //drop.init();
            //drop.draw();
            //延迟产生每个雨滴
            function setup(){
                for (var i=0;i < count ;i++ )
                {
                    (function(j){
                        setTimeout(function(){
                            var drop = new Drop();
                            drop.init();
                            drops.push(drop);
                        },j*200);
                    }(i))
                }
            }
            setup();
            move();
            //封装一个产生随机数的方法
            function random(min,max){
                return Math.random()*(max-min) + min;
            }
            //封装一个随机颜色
            function color(a){
                return "white"
            }
        </script>

<script type="text/javascript">
    window.onload = function() {
        //配置
        var config = {
            vx: 4,	//小球x轴速度,正为右，负为左
            vy: 4,	//小球y轴速度
            height: 2,	//小球高宽，其实为正方形，所以不宜太大
            width: 2,
            count: 150,		//点个数
            color: "121, 162, 185", 	//点颜色
            stroke: "130,255,255", 		//线条颜色
            dist: 6000, 	//点吸附距离
            e_dist: 20000, 	//鼠标吸附加速距离
            max_conn: 10	//点到点最大连接数
        }
  
        //调用
        CanvasParticle(config);
    }
  </script>
  <script type="text/javascript" src="../../js/canvas-particle.js"></script>
</body>
</html>